# PVA

## Abstract:
Our team will design a circuit which will take as inputs a square quadrature signal and calculate the position, velocity, and acceleration of the rotating signal generator.  Our circuit should output a signed integer due to the possibility of negative values for the position, velocity, and acceleration that can be generated by moving the signal generator in two directions. 

## Block Definition:
### Block 1 : Detect Direction

The first block of our diagram takes as input two signals representing the two square waves of the quadrature encoded signal. This block recognizes the direction of the square quadrature signal. It uses a sequence detector for (011) to determine the rising edge of a waveform. When a rising edge is detected, the value of the second waveform is checked to determine which wave is rising first. This determines the direction that the signal is representing. The output of this block is two signals. These signals represent that the circuit has detected a rising edge in one of the two directions. 

### Block 2 : Determine position

This subcircuit takes as input two input signals from the direction detection block (block 1). It produces as an output an 8 bit integer representing the current position of the signal generator. When two consecutive wavefronts are detected in the same direction, this is assumed to mean that one cycle in that direction has elapsed. This subcircuit adjusts the position accordingly. Two wavefronts in the “forward” direction means that the position will be incremented. Two wavefronts in the “backwards” direction means that the position will be decremented.

### Block 3 : Calculate Velocity
	
The third block of our design is to calculate the Velocity. We use registers to place our initial position value and the final position value. These values are grabbed and pulled by a 127 sequence counter. Every 127 clock cycles the position is placed into the initial and the previous initial is placed into the final position register. To avoid a division we are shifting the difference between the final position and the initial position by 7 left shifts. As of now we only have the velocity calculation working in the forward direction. We are working on getting it to work.
